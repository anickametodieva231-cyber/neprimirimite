<script type="text/javascript">
        var gk_isXlsx = false;
        var gk_xlsxFileLookup = {};
        var gk_fileData = {};
        function filledCell(cell) {
          return cell !== '' && cell != null;
        }
        function loadFileData(filename) {
        if (gk_isXlsx && gk_xlsxFileLookup[filename]) {
            try {
                var workbook = XLSX.read(gk_fileData[filename], { type: 'base64' });
                var firstSheetName = workbook.SheetNames[0];
                var worksheet = workbook.Sheets[firstSheetName];

                // Convert sheet to JSON to filter blank rows
                var jsonData = XLSX.utils.sheet_to_json(worksheet, { header: 1, blankrows: false, defval: '' });
                // Filter out blank rows (rows where all cells are empty, null, or undefined)
                var filteredData = jsonData.filter(row => row.some(filledCell));

                // Heuristic to find the header row by ignoring rows with fewer filled cells than the next row
                var headerRowIndex = filteredData.findIndex((row, index) =>
                  row.filter(filledCell).length >= filteredData[index + 1]?.filter(filledCell).length
                );
                // Fallback
                if (headerRowIndex === -1 || headerRowIndex > 25) {
                  headerRowIndex = 0;
                }

                // Convert filtered JSON back to CSV
                var csv = XLSX.utils.aoa_to_sheet(filteredData.slice(headerRowIndex)); // Create a new sheet from filtered array of arrays
                csv = XLSX.utils.sheet_to_csv(csv, { header: 1 });
                return csv;
            } catch (e) {
                console.error(e);
                return "";
            }
        }
        return gk_fileData[filename] || "";
        }
        </script><!DOCTYPE html>
<html lang="bg">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Български централен комитет „Непримиримите“</title>
    <script src="https://cdn.jsdelivr.net/npm/react@18.2.0/umd/react.production.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/react-dom@18.2.0/umd/react-dom.production.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/@babel/standalone@7.22.5/babel.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/jspdf@2.5.1/dist/jspdf.umd.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/crypto-js@4.1.1/crypto-js.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        body { scroll-behavior: smooth; }
        #navbar { transition: background-color 0.3s; }
        .navbar-scrolled { background-color: rgba(30, 58, 138, 0.9); }
    </style>
</head>
<body class="bg-gray-100 font-sans text-gray-800">
    <div id="root"></div>
    <script type="text/babel">
        const documents = [
            { id: 1, title: "Устав на БЦК „Непримиримите“", category: "Организационни", url: "ustav.pdf", lang: "bg" },
            { id: 2, title: "Протокол за приемане на устава", category: "Организационни", url: "protocol_ustav.pdf", lang: "bg" },
            { id: 3, title: "Шаблон за петиция „Справедлива сметка“", category: "Правна комисия", url: "petition_template.pdf", lang: "bg" },
            { id: 4, title: "Концепция за борба с монополите", category: "Икономическа комисия", url: "monopoly_concept.pdf", lang: "bg" }
        ];

        function Navbar() {
            const [scrolled, setScrolled] = React.useState(false);

            React.useEffect(() => {
                const handleScroll = () => setScrolled(window.scrollY > 50);
                window.addEventListener('scroll', handleScroll);
                return () => window.removeEventListener('scroll', handleScroll);
            }, []);

            return (
                <nav id="navbar" className={`fixed top-0 w-full z-10 ${scrolled ? 'navbar-scrolled' : 'bg-blue-900'} text-white p-4`}>
                    <div className="container mx-auto flex justify-between items-center">
                        <h1 className="text-xl font-bold">БЦК „Непримиримите“</h1>
                        <div className="space-x-4">
                            <a href="#home" className="hover:text-blue-300">Начало</a>
                            <a href="#about" className="hover:text-blue-300">За нас</a>
                            <a href="#documents" className="hover:text-blue-300">Документи</a>
                            <a href="#petition" className="hover:text-blue-300">Жалба/Петиция</a>
                            <a href="#finance" className="hover:text-blue-300">Финансови отчети</a>
                            <a href="#events" className="hover:text-blue-300">Събития</a>
                        </div>
                    </div>
                </nav>
            );
        }

        function Hero() {
            return (
                <section id="home" className="bg-blue-900 text-white h-screen flex items-center justify-center">
                    <div className="text-center">
                        <h1 className="text-4xl md:text-5xl font-bold mb-4">Български централен комитет „Непримиримите“</h1>
                        <p className="text-lg md:text-xl mb-6">Един за всички, всички за един</p>
                        <a href="#about" className="bg-white text-blue-900 px-6 py-3 rounded-full font-semibold hover:bg-blue-100">Научи повече</a>
                    </div>
                </section>
            );
        }

        function About() {
            return (
                <section id="about" className="py-16 px-4">
                    <div className="container mx-auto">
                        <h2 className="text-3xl font-bold text-center mb-8">За нас</h2>
                        <p className="text-lg text-center max-w-3xl mx-auto">
                            Българският централен комитет „Непримиримите“ е посветен на коренна промяна на деспотичното управление, което не защитава интересите на българския народ. Нашата мисия е да заменим сегашния елит с хора с висок морал, родолюбие и образование, като изградим система за взаимопомощ и граждански натиск за справедливост, икономическа свобода и духовно възраждане.
                        </p>
                    </div>
                </section>
            );
        }

        function Documents() {
            const [filter, setFilter] = React.useState('all');
            const [lang, setLang] = React.useState('bg');

            const filteredDocuments = documents.filter(doc => 
                (filter === 'all' || doc.category === filter) && (lang === 'all' || doc.lang === lang)
            );

            return (
                <section id="documents" className="py-16 bg-white px-4">
                    <div className="container mx-auto">
                        <h2 className="text-3xl font-bold text-center mb-8">Документи</h2>
                        <div className="flex justify-center space-x-4 mb-6">
                            <select onChange={(e) => setFilter(e.target.value)} className="p-2 border rounded">
                                <option value="all">Всички категории</option>
                                <option value="Организационни">Организационни</option>
                                <option value="Правна комисия">Правна комисия</option>
                                <option value="Икономическа комисия">Икономическа комисия</option>
                            </select>
                            <select onChange={(e) => setLang(e.target.value)} className="p-2 border rounded">
                                <option value="all">Всички езици</option>
                                <option value="bg">Български</option>
                                <option value="en">Английски</option>
                            </select>
                        </div>
                        <ul className="grid grid-cols-1 md:grid-cols-2 gap-4">
                            {filteredDocuments.map(doc => (
                                <li key={doc.id}>
                                    <a href={doc.url} download className="block bg-blue-900 text-white p-4 rounded hover:bg-blue-700">
                                        {doc.title}
                                    </a>
                                </li>
                            ))}
                        </ul>
                    </div>
                </section>
            );
        }

        function Petition() {
            const [formData, setFormData] = React.useState({
                name: '',
                address: '',
                complaint: '',
                saved: false
            });

            const handleChange = (e) => {
                const { name, value } = e.target;
                setFormData({ ...formData, [name]: value, saved: false });
            };

            const saveDraft = () => {
                localStorage.setItem('petitionDraft', JSON.stringify(formData));
                setFormData({ ...formData, saved: true });
            };

            const loadDraft = () => {
                const draft = JSON.parse(localStorage.getItem('petitionDraft'));
                if (draft) setFormData({ ...draft, saved: true });
            };

            const generatePDF = () => {
                const { jsPDF } = window.jspdf;
                const doc = new jsPDF();
                doc.setFont('helvetica', 'normal');
                doc.setFontSize(12);
                doc.text('Жалба/Петиция „Справедлива сметка“', 20, 20);
                doc.text(`Име: ${formData.name}`, 20, 30);
                doc.text(`Адрес: ${formData.address}`, 20, 40);
                doc.text('Жалба:', 20, 50);
                doc.text(formData.complaint, 20, 60, { maxWidth: 170 });
                doc.save('petition.pdf');
            };

            const sendToTrollBox = () => {
                const encrypted = CryptoJS.AES.encrypt(
                    JSON.stringify(formData),
                    'secret-key-123'
                ).toString();
                alert('Изпращане през TrollBox (симулация): ' + encrypted);
            };

            React.useEffect(() => {
                loadDraft();
            }, []);

            return (
                <section id="petition" className="py-16 px-4">
                    <div className="container mx-auto">
                        <h2 className="text-3xl font-bold text-center mb-8">Попълване на жалба/петиция</h2>
                        <div className="max-w-lg mx-auto space-y-4">
                            <div>
                                <label htmlFor="name" className="block text-sm font-medium">Име</label>
                                <input
                                    type="text"
                                    id="name"
                                    name="name"
                                    value={formData.name}
                                    onChange={handleChange}
                                    className="w-full p-2 border rounded"
                                    required
                                />
                            </div>
                            <div>
                                <label htmlFor="address" className="block text-sm font-medium">Адрес</label>
                                <input
                                    type="text"
                                    id="address"
                                    name="address"
                                    value={formData.address}
                                    onChange={handleChange}
                                    className="w-full p-2 border rounded"
                                    required
                                />
                            </div>
                            <div>
                                <label htmlFor="complaint" className="block text-sm font-medium">Текст на жалбата</label>
                                <textarea
                                    id="complaint"
                                    name="complaint"
                                    value={formData.complaint}
                                    onChange={handleChange}
                                    className="w-full p-2 border rounded"
                                    rows="5"
                                    required
                                ></textarea>
                            </div>
                            <div className="flex space-x-4">
                                <button
                                    onClick={saveDraft}
                                    className="bg-gray-500 text-white p-2 rounded hover:bg-gray-600"
                                >
                                    Запази чернова
                                </button>
                                <button
                                    onClick={generatePDF}
                                    className="bg-green-500 text-white p-2 rounded hover:bg-green-600"
                                >
                                    Генерирай PDF
                                </button>
                                <button
                                    onClick={sendToTrollBox}
                                    className="bg-blue-500 text-white p-2 rounded hover:bg-blue-600"
                                >
                                    Изпрати през TrollBox
                                </button>
                            </div>
                            {formData.saved && <p className="text-green-600">Черновата е запазена!</p>}
                        </div>
                    </div>
                </section>
            );
        }

        function Finance() {
            const [isAuthenticated, setIsAuthenticated] = React.useState(false);
            const [password, setPassword] = React.useState('');
            const [financeData, setFinanceData] = React.useState({
                date: '',
                amount: '',
                description: '',
                type: 'income'
            });

            const handleLogin = (e) => {
                e.preventDefault();
                if (password === 'bck2025') {
                    setIsAuthenticated(true);
                } else {
                    alert('Грешна парола!');
                }
            };

            const handleFinanceChange = (e) => {
                const { name, value } = e.target;
                setFinanceData({ ...financeData, [name]: value });
            };

            const generateReport = () => {
                const { jsPDF } = window.jspdf;
                const doc = new jsPDF();
                doc.setFont('helvetica', 'normal');
                doc.setFontSize(12);
                doc.text('Финансов отчет', 20, 20);
                doc.text(`Дата: ${financeData.date}`, 20, 30);
                doc.text(`Сума: ${financeData.amount} лв.`, 20, 40);
                doc.text(`Тип: ${financeData.type === 'income' ? 'Приход' : 'Разход'}`, 20, 50);
                doc.text(`Описание: ${financeData.description}`, 20, 60, { maxWidth: 170 });
                doc.save('financial_report.pdf');
            };

            if (!isAuthenticated) {
                return (
                    <section id="finance" className="py-16 px-4">
                        <div className="container mx-auto max-w-lg">
                            <h2 className="text-3xl font-bold text-center mb-8">Финансови отчети (само за касиери)</h2>
                            <form onSubmit={handleLogin} className="space-y-4">
                                <div>
                                    <label htmlFor="password" className="block text-sm font-medium">Парола</label>
                                    <input
                                        type="password"
                                        id="password"
                                        value={password}
                                        onChange={(e) => setPassword(e.target.value)}
                                        className="w-full p-2 border rounded"
                                        required
                                    />
                                </div>
                                <button type="submit" className="bg-blue-900 text-white p-2 rounded hover:bg-blue-700">
                                    Вход
                                </button>
                            </form>
                        </div>
                    </section>
                );
            }

            return (
                <section id="finance" className="py-16 px-4">
                    <div className="container mx-auto max-w-lg">
                        <h2 className="text-3xl font-bold text-center mb-8">Финансови отчети</h2>
                        <div className="space-y-4">
                            <div>
                                <label htmlFor="date" className="block text-sm font-medium">Дата</label>
                                <input
                                    type="date"
                                    id="date"
                                    name="date"
                                    value={financeData.date}
                                    onChange={handleFinanceChange}
                                    className="w-full p-2 border rounded"
                                    required
                                />
                            </div>
                            <div>
                                <label htmlFor="amount" className="block text-sm font-medium">Сума (лв.)</label>
                                <input
                                    type="number"
                                    id="amount"
                                    name="amount"
                                    value={financeData.amount}
                                    onChange={handleFinanceChange}
                                    className="w-full p-2 border rounded"
                                    required
                                />
                            </div>
                            <div>
                                <label htmlFor="description" className="block text-sm font-medium">Описание</label>
                                <textarea
                                    id="description"
                                    name="description"
                                    value={financeData.description}
                                    onChange={handleFinanceChange}
                                    className="w-full p-2 border rounded"
                                    rows="4"
                                    required
                                ></textarea>
                            </div>
                            <div>
                                <label htmlFor="type" className="block text-sm font-medium">Тип</label>
                                <select
                                    id="type"
                                    name="type"
                                    value={financeData.type}
                                    onChange={handleFinanceChange}
                                    className="w-full p-2 border rounded"
                                >
                                    <option value="income">Приход</option>
                                    <option value="expense">Разход</option>
                                </select>
                            </div>
                            <button
                                onClick={generateReport}
                                className="bg-green-500 text-white p-2 rounded hover:bg-green-600"
                            >
                                Генерирай отчет
                            </button>
                        </div>
                    </div>
                </section>
            );
        }

        function Events() {
            const events = [
                { id: 1, title: "Фестивал „Справедлив пазар“", date: "2025-08-15", location: "София" },
                { id: 2, title: "Мирно шествие", date: "2025-09-01", location: "Пловдив" }
            ];

            return (
                <section id="events" className="py-16 bg-white px-4">
                    <div className="container mx-auto">
                        <h2 className="text-3xl font-bold text-center mb-8">Събития</h2>
                        <ul className="grid grid-cols-1 md:grid-cols-2 gap-4">
                            {events.map(event => (
                                <li key={event.id} className="bg-gray-100 p-4 rounded">
                                    <h3 className="text-xl font-semibold">{event.title}</h3>
                                    <p>Дата: {event.date}</p>
                                    <p>Място: {event.location}</p>
                                </li>
                            ))}
                        </ul>
                    </div>
                </section>
            );
        }

        function Footer() {
            return (
                <footer className="bg-blue-900 text-white py-8">
                    <div className="container mx-auto text-center">
                        <p>&copy; 2025 Български централен комитет „Непримиримите“. Всички права запазени.</p>
                        <p className="mt-2">
                            <a href="https://github.com/anickametodieva231-cyber/neprimirimite" target="_blank" rel="noopener noreferrer" className="hover:text-blue-300">GitHub</a> | 
                            <a href="https://github.com/OmegaBlockchain/trollbox" target="_blank" rel="noopener noreferrer" className="hover:text-blue-300">TrollBox</a>
                        </p>
                    </div>
                </footer>
            );
        }

        function App() {
            return (
                <div>
                    <Navbar />
                    <Hero />
                    <About />
                    <Documents />
                    <Petition />
                    <Finance />
                    <Events />
                    <Footer />
                </div>
            );
        }

        ReactDOM.render(<App />, document.getElementById('root'));

        if ('serviceWorker' in navigator) {
            navigator.serviceWorker.register('/sw.js').catch(error => {
                console.error('Service Worker registration failed:', error);
            });
        }
    </script>
</body>
</html>
